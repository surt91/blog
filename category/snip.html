<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>möchte­gern­geek - Snip category</title>
<meta content="Dinge, die ich für hübsch, praktisch oder interessant halte." name="description"/>
<meta content="Hendrik Schawe" name="author"/>
<meta content="Hendrik Schawe" name="copyright"/>
<meta content="#3d4f5d" name="theme-color"/>
<link href="/manifest.json" rel="manifest"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Add to home screen for Safari on iOS-->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="möchtegerngeek" name="apple-mobile-web-app-title"/>
<link href="/extra/icons/icon-152x152.png" rel="apple-touch-icon"/>
<!-- Add to home screen for Windows-->
<meta content="/extra/icons/icon-152x152.png" name="msapplication-TileImage"/>
<meta content="#b0cadb" name="msapplication-TileColor"/>
<meta content="möchte­gern­geek" property="og:site_name"/>
<meta content="Hendrik Schawe" property="og:article:author"/>
<meta content="article" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="https://blog.schawe.me/img/logo.png" property="og:image"/>
<meta content="https://blog.schawe.me/img/logo.png" name="twitter:image"/>
<link href="https://blog.schawe.me/category/snip.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/en/category/snip.html" hreflang="en" rel="alternate">
<link href="https://blog.schawe.me/category/snip.html" hreflang="x-default" rel="alternate">
<link href="/theme/webassets-external/6fc8b5d0286641a8981481d8734adb14_pure-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/webassets-external/cd1fc9b8f4fd6935866873d6d3cfad1b_grids-responsive-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/blog.css" rel="stylesheet" type="text/css"/>
<script async="" src="/theme/js/mathjax-config.js"></script>
<script async="" crossorigin="anonymous" data-search-pseudo-elements="" integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<!-- Preload the other fonts early -->
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptRegular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Bold.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptItalic.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-bold.woff2" rel="prefetch" type="font/woff2"/>
<link href="https://blog.schawe.me/feeds/all.atom.xml" rel="alternate" title="möchte­gern­geek - Full Atom Feed" type="application/atom+xml">
</link></link></link></link></head>
<body>
<div class="pure-g" id="layout">
<div class="sidebar pure-u-1 pure-u-lg-1-4">
<div class="header">
<h1 class="brand-title"><a href="https://blog.schawe.me">möchte­gern­geek</a></h1>
<nav class="nav">
<ul class="nav-list container">
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/"><i class="fa fa-globe"></i> en</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/categories.html">Kategorien</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/tags.html">Tags</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/archives.html">Archiv</a>
</li>
</ul>
</nav>
<div class="container">
<a class="sidebar-social-links" href="https://hendrik.schawe.me" rel="noopener" target="_blank" title="Ich">
<i class="fas fa-user sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://github.com/surt91" rel="noopener" target="_blank" title="GitHub">
<i class="fab fa-github sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="mailto:hendrik.schawe+blog@gmail.com" rel="noopener" target="_blank" title="Email">
<i class="fas fa-envelope sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://twitter.com/surt91" rel="noopener" target="_blank" title="Twitter">
<i class="fab fa-twitter sidebar-social-links"></i>
</a>
</div>
<div class="container">
<form action="https://blog.schawe.me/search.html" class="pure-form">
<fieldset>
<input aria-label="Suche" class="search-query" id="tipue_search_input" name="q" placeholder="Suche" type="text"/>
</fieldset>
</form>
</div>
</div>
</div>
<div class="content pure-u-1 pure-u-lg-3-4">
<div class="posts">
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/git-subtree.html"> git subtree  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2022-07-24T17:31:00+02:00">24.07.2022</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/git-subtree.html"><i class="fa fa-globe"></i> en</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>Wir alle kennen die Situation: Eine neue Idee, mit der wir unser bestehendes Projekt mit dem Namen <code>alt</code> erweitern, sodass wir sogleich im zugehörigen Repository ein Unterverzeichnis <code>neueIdee</code> anlegen. Die Idee stellt sich dann als so gut heraus, dass sie auch außerhalb des Projektes <code>alt</code> nützlich wäre. Es wäre also sehr sinnvoll ein neues Repository <code>neu</code> anzulegen, das nur den Inhalt des Unterverzeichnisses <code>neueIdee</code> enthalten soll. Tatsächlich scheint dieses Problem wohl so oft vorzukommen, dass es seit 2012 ein extra git Subcommand für diesen Zweck (und etwas kompliziertere Fälle) gibt: <code>git subtree</code></p>
<h2>Neues Repository aus einem Unterverzeichnis</h2>
<div class="highlight"><pre><span></span><code>alt/
├─ neueIdee/
│  ├─ lib.rs
├─ main.rs
</code></pre></div>
<p>Wir wechseln also in das Repository <code>alt</code> führen dort folgendes Kommando aus:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>subtree<span class="w"> </span>split<span class="w"> </span>--prefix<span class="o">=</span>neueIdee/<span class="w"> </span>--branch<span class="o">=</span>nurNeueIdeeBranch
</code></pre></div>
<p>Dies erzeugt in diesem Repository zunächst einen neuen Branch <code>nurNeueIdeeBranch</code>, der nur den Inhalt von <code>neueIdee</code> hat — also ein anderes Wurzelverzeichnis. Dieser Branch enthält also eine neu geschriebene History, die nur aus Commits besteht, die (auch) Einfluss auf Dateien unterhalb von <code>neueIdee</code> hatten.</p>
<p>Nun können wir unser neues Repository <code>neu</code> anlegen und den soeben erzeugten Branch pullen.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="p">;</span><span class="w"> </span>mkdir<span class="w"> </span>neu<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>neu
git<span class="w"> </span>init
git<span class="w"> </span>pull<span class="w"> </span>../alt<span class="w"> </span>nurNeueIdeeBranch
</code></pre></div>
<p>Und schon haben wir ein neues Repository, das nur den gewünschten Inhalt hat.</p>
<div class="highlight"><pre><span></span><code>alt/
├─ main.rs
neu/
├─ lib.rs
</code></pre></div>
<p>Möglicherweise wollen wir noch einen Commit im alten Repository tätigen, der das <code>neueIdee</code> Unterverzeichnis löscht. Möglicherweise müssen wir im neuen Repository noch Änderungen am Infrastrukturcode vornehmen.</p>
<h2>Verschieben eines Unterverzeichnisses in ein bestehendes Repository</h2>
<p>Womöglich fällt uns aber auch auf, dass der Code besser in ein anderes Repository statt eines Neuen passt? Vielleicht weil wir gerade dabei sind unseren Code in einem Monorepo zu sammeln? Auch kein Problem!</p>
<div class="highlight"><pre><span></span><code>alt/
├─ neueIdee/
│  ├─ lib.rs
├─ main.rs
monorepo/
├─ project1/
├─ project2/
</code></pre></div>
<p>Wir haben oben  bereits den <code>nurNeueIdeeBranch</code> erstellt, den wir nun in das Unterverzeichnis <code>guteIdee</code>des Repositorys <code>monorepo</code> einfügen wollen. Auch hier hilft uns wieder <code>git subtree</code> weiter:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>monorepo
git<span class="w"> </span>branch<span class="w"> </span>mitGuterIdeeBranch
git<span class="w"> </span>checkout<span class="w"> </span>mitGuterIdeeBranch
git<span class="w"> </span>subtree<span class="w"> </span>add<span class="w"> </span>--prefix<span class="o">=</span>guteIdee/<span class="w"> </span>../alt<span class="w"> </span>nurNeueIdeeBranch
</code></pre></div>
<p>Sobald wir uns in dem neuen Branch <code>mitGuterIdeeBranch</code> überzeugt haben, dass alles zu unserer Zufriedenheit geklappt hat und wir möglicherweise noch Infrastrukturcode angepasst haben, können wir den Branch nach <code>main</code> mergen und sind fertig.</p>
<div class="highlight"><pre><span></span><code>alt/
├─ neueIdee/
│  ├─ lib.rs
├─ main.rs
monorepo/
├─ project1/
├─ project2/
├─ guteIdee/
│  ├─ lib.rs
</code></pre></div>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/raspberry-router.html"> Raspberry Router  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2021-05-10T20:19:00+02:00">10.05.2021</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/raspberry-router.html"><i class="fa fa-globe"></i> en</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>Für die Fälle, in denen man nur per <span class="caps">WLAN</span> einen Zugang
zum Internet und nur einen Raspberry <span class="caps">PI</span> dabei hat, aber dennoch
kabelgebundenes Internet braucht, notiere ich diesen Eintrag.
Für weitergehende Informationen ist das <a href="https://wiki.archlinux.org/index.php/Internet_sharing">Arch Linux Wiki</a>,
wie immer, empfehlenswert.</p>
<p>Wir müssen unseren Raspberry nur mit dem <span class="caps">WLAN</span> verbinden, das Ethernetkabel
einstecken und spezifizieren, dass der Traffic vom einen zum
anderen weitergeleitet werden sollen.</p>
<div class="highlight"><pre><span></span><code>sysctl<span class="w"> </span>net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span>
iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>POSTROUTING<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>MASQUERADE
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>wlan0<span class="w"> </span>-o<span class="w"> </span>eth0<span class="w"> </span>-m<span class="w"> </span>state<span class="w"> </span>--state<span class="w"> </span>RELATED,ESTABLISHED<span class="w"> </span>-j<span class="w"> </span>ACCEPT
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>ACCEPT
</code></pre></div>
<p>Da unser Raspberry jetzt ein Router ist, muss er natürlich auch die üblichen Aufgaben
eines Routers übernehmen und die Geräte, die per Ethernet verbunden werden
per <span class="caps">DHCP</span> mit <span class="caps">IP</span> Adressen versorgen, beispielsweise mittels <a href="https://wiki.archlinux.org/title/Dnsmasq">dnsmasq</a>
mit folgender Konfiguration in <code>/etc/dnsmasq.conf</code>:</p>
<div class="highlight"><pre><span></span><code>#disable dns
port=0

dhcp-range=192.168.13.50,192.168.13.150,12h
bind-interfaces
dhcp-option=3,0.0.0.0
dhcp-option=6,1.1.1.1,8.8.8.8
</code></pre></div>
<p>Bei der Gelegenheit kann man auch dafür sorgen, dass sämtlicher Traffic
durch ein <span class="caps">VPN</span> geleitet wird, indem man das <code>wlan0</code> Interface oben durch
das konfigurierte <span class="caps">VPN</span>-Interface austauscht (zB. durch <code>tun0</code> für OpenVPN
oder <code>wg0</code> für WireGuard).</p>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/compress-pdf.html"> compress-pdf  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2020-04-12T10:26:00+02:00">12.04.2020</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/compress-pdf.html"><i class="fa fa-globe"></i> en</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>Um ein <code>pdf</code> mit vielen zu hoch aufgelösten Bildern auf eine angemessene
Dateigröße zu bringen (durch das Herunterskalieren und gegebenenfalls
Neukodieren der Bilder), kann einfach ghostscript genutzt werden:</p>
<div class="highlight"><pre><span></span><code>gs<span class="w"> </span>-sDEVICE<span class="o">=</span>pdfwrite<span class="w"> </span>-dCompatibilityLevel<span class="o">=</span><span class="m">1</span>.4<span class="w"> </span>-dPDFSETTINGS<span class="o">=</span>/ebook<span class="w"> </span>-dEmbedAllFonts<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-dSubsetFonts<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-dNOPAUSE<span class="w"> </span>-dQUIET<span class="w"> </span>-dBATCH<span class="w"> </span>-sOutputFile<span class="o">=</span>output.pdf<span class="w"> </span>input.pdf
</code></pre></div>
<p>Die Qualitätspresets sind <code>screen</code>, <code>ebook</code>, <code>printer</code>, <code>prepress</code> und <code>default</code>.
Weitere Optionsnamen können durch folgendes Kommando ermittelt werden:</p>
<div class="highlight"><pre><span></span><code>gs<span class="w"> </span>-sDEVICE<span class="o">=</span>pdfwrite<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span>-c<span class="w"> </span><span class="s2">"currentpagedevice { exch ==only ( ) print == } forall"</span>
</code></pre></div>
</div>
</article>
</div>
<div class="post-navigation">
<nav class="pagination">
<a href="https://blog.schawe.me/category/snip2.html">Älter →</a>
<br/>
            1 / 5
        </nav>
</div>
</div>
<div id="last-update">
<time datetime="2024-12-27 10:29:03">10:29:03 27.12.2024</time>
</div>
</div>
<script async="" src="/theme/webassets-external/0cf7968c252ead5c096e55c1f7673096_rythm.js"></script>
<script async="" src="/theme/webassets-external/a8b690a4c23c0610ea6538a9352534be_totally_serious_script.js"></script>
<script async="" src="/theme/js/unregister_service_worker.js"></script>
</body>
</html>