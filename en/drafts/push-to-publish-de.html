<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Push to Publish  · möchte­gern­geek</title>
<meta content="Seit Anfang August wird dieses Blog nicht mehr von einem Raspberry aus den eigenen vier Wänden ausgeliefert, sondern von GitHub pages. Da die Quellen dieses Blogs bereits auf GitHub sind, ist dies ein konsequenter Schritt. Hosting auf GitHub Pages GitHub bietet hosting von statischen Seiten an, was perfekt zu diesem …" name="description"/>
<meta content="Hendrik Schawe" name="author"/>
<meta content="Hendrik Schawe" name="copyright"/>
<meta content="#3d4f5d" name="theme-color"/>
<link href="/manifest.json" rel="manifest"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Add to home screen for Safari on iOS-->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="möchtegerngeek" name="apple-mobile-web-app-title"/>
<link href="/extra/icons/icon-152x152.png" rel="apple-touch-icon"/>
<!-- Add to home screen for Windows-->
<meta content="/extra/icons/icon-152x152.png" name="msapplication-TileImage"/>
<meta content="#b0cadb" name="msapplication-TileColor"/>
<meta content="möchte­gern­geek" property="og:site_name"/>
<meta content="Hendrik Schawe" property="og:article:author"/>
<meta content="article" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="Hosting, Meta, " name="keywords"/>
<meta content="Push to Publish " name="twitter:title">
<meta content="Seit Anfang August wird dieses Blog nicht mehr von einem Raspberry aus den eigenen vier Wänden ausgeliefert, sondern von GitHub pages. Da die Quellen dieses Blogs bereits auf GitHub sind, ist dies ein konsequenter Schritt. Hosting auf GitHub Pages GitHub bietet hosting von statischen Seiten an, was perfekt zu diesem …" name="twitter:description">
<meta content="Push to Publish " name="og:title">
<meta content="Seit Anfang August wird dieses Blog nicht mehr von einem Raspberry aus den eigenen vier Wänden ausgeliefert, sondern von GitHub pages. Da die Quellen dieses Blogs bereits auf GitHub sind, ist dies ein konsequenter Schritt. Hosting auf GitHub Pages GitHub bietet hosting von statischen Seiten an, was perfekt zu diesem …" name="og:description">
<meta content="drafts/push-to-publish-de.html" property="og:url">
<meta content="2017-08-11T17:00:00+02:00" property="og:article:published_time">
<meta content="https://blog.schawe.me/en/img/octocat.png" property="og:image"/>
<meta content="https://blog.schawe.me/en/img/octocat.png" name="twitter:image"/>
<link href="https://blog.schawe.me/drafts/push-to-publish-de.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/drafts/push-to-publish-de.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/drafts/push-to-publish-de.html" hreflang="x-default" rel="alternate">
<link href="/theme/css/pure-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/grids-responsive-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/blog.css" rel="stylesheet" type="text/css"/>
<script async="" src="/theme/js/mathjax-config.js"></script>
<script async="" crossorigin="anonymous" data-search-pseudo-elements="" integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<!-- Preload the other fonts early -->
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptRegular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Bold.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptItalic.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-bold.woff2" rel="prefetch" type="font/woff2"/>
<link href="https://blog.schawe.me/feeds/all.atom.xml" rel="alternate" title="möchte­gern­geek - Full Atom Feed" type="application/atom+xml">
</link></link></link></link></meta></meta></meta></meta></meta></meta></head>
<body>
<div class="pure-g" id="layout">
<div class="sidebar pure-u-1 pure-u-lg-1-4">
<div class="header">
<h1 class="brand-title"><a href="https://blog.schawe.me/en">möchte­gern­geek</a></h1>
<nav class="nav">
<ul class="nav-list container">
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/"><i class="fa fa-globe"></i> de</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/categories.html">Categories</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/tags.html">Tags</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/archives.html">Archive</a>
</li>
</ul>
</nav>
<div class="container">
<a class="sidebar-social-links" href="https://hendrik.schawe.me" rel="noopener" target="_blank" title="Ich">
<i class="fas fa-user sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://github.com/surt91" rel="noopener" target="_blank" title="GitHub">
<i class="fab fa-github sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="mailto:hendrik.schawe+blog@gmail.com" rel="noopener" target="_blank" title="Email">
<i class="fas fa-envelope sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://twitter.com/surt91" rel="noopener" target="_blank" title="Twitter">
<i class="fab fa-twitter sidebar-social-links"></i>
</a>
</div>
<div class="container">
<form action="https://blog.schawe.me/en/search.html" class="pure-form">
<fieldset>
<input aria-label="Search" class="search-query" id="tipue_search_input" name="q" placeholder="Search" type="text"/>
</fieldset>
</form>
</div>
</div>
</div>
<div class="content pure-u-1 pure-u-lg-3-4">
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/drafts/push-to-publish-de.html"> Push to Publish  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2017-08-11T17:00:00+02:00">11.08.2017</time>
<span class="category category-meta">
<a href="https://blog.schawe.me/en/categories.html#meta-ref">Meta</a>
</span>
<span class="tags-in-article">
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#hosting-ref">Hosting</a>
</span>
</span>
</div>
</header>
<div class="post-content">
<p>Seit Anfang August wird dieses Blog nicht mehr
<a href="https://blog.schawe.me/en/blogumzug-de.html">von einem Raspberry aus den eigenen vier Wänden ausgeliefert</a>,
sondern von GitHub pages. Da die Quellen dieses Blogs bereits <a href="https://github.com/surt91/blog">auf GitHub</a>
sind, ist dies ein konsequenter Schritt.</p>
<h3>Hosting auf GitHub Pages <a href="https://github.com/"><img alt="GitHub Logo" class="icon" height="665" src="/img/octocat.png" width="800"/></a></h3>
<p>GitHub bietet hosting von statischen Seiten an, was perfekt zu diesem Pelican
Blog passt. Die Verwaltung ist denkbar einfach: Für jedes Repository ist der
Branch <code>gh-pages</code> unter <code>[username].github.io/[reponame]</code>, hier z.B.
<a href="https://surt91.github.io/blog">surt91.github.io/blog</a>, erreichbar.</p>
<p>Will man unter einer eigenen Domain erreichbar sein, reicht es aus, im <span class="caps">DNS</span> für die
Domain einen <span class="caps">CNAME</span> Eintrag auf <code>[username].github.io</code> anzulegen und im root des
<code>gh-pages</code> Branches eine Datei <code>CNAME</code> mit der eigenen Domain anzulegen, hier z.B.</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span>blog.schawe.me<span class="w"> </span>&gt;<span class="w"> </span>CNAME
</code></pre></div>
<p>Primär dient GitHub pages dazu Jekyll Seiten zu erstellen und auszuliefern, was
zu Konflikten führen kann, wenn man einfach nur statische Seiten im <code>gh-pages</code>
Branch vorhält. Dies lässt sich einfach vermeiden, indem man eine Datei
<code>.nojekyll</code> im root anlegt.</p>
<h3>Automatische Erstellung durch Travis <span class="caps">CI</span> <a href="https://travis-ci.org/"><img alt="Travis CI Logo" class="icon" height="497" src="/img/travis.png" width="501"/></a></h3>
<p>Natürlich könnte man das statische <span class="caps">HTML</span> auf einem lokalen Computer erstellen
und per Hand in den <code>gh-pages</code> Branch pushen. Aber man kann das auch einem
Dienst wie Travis <a href="https://de.wikipedia.org/wiki/Kontinuierliche_Integration"><span class="caps">CI</span></a> überlassen.</p>
<p>Die Idee ist, dass jedes Mal wenn man die Quellen seiner Seite ändert — im
Fall von Pelican werden die Blogeinträge in Markdown geschrieben und dann in
<span class="caps">HTML</span> konvertiert — ein Server die Seite erstellt und das Ergebnis in den
<code>gh-pages</code> Branch pusht. Dadurch wird ein Update der Website auf ein einfaches
<code>git push</code> reduziert.</p>
<p>Die Konfiguration von Travis <span class="caps">CI</span> wird durch eine denkbar einfache <span class="caps">YAML</span> Datei
definiert.
Eine (vereinfachte) Konfiguration für dieses Blog sieht beispielsweise so aus:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># pelican is a python program</span>
<span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="nt">python</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"3.5"</span>

<span class="c1"># install pelican and some more packages</span>
<span class="nt">install</span><span class="p">:</span><span class="w"> </span><span class="s">"pip</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">-r</span><span class="nv"> </span><span class="s">requirements.txt"</span>

<span class="c1"># generate static html through pelican's makefile</span>
<span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make publish</span>

<span class="c1"># deploy to github pages</span>
<span class="nt">deploy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pages</span>
<span class="w">  </span><span class="nt">skip_cleanup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">github_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$GITHUB_TOKEN</span>
<span class="w">  </span><span class="nt">local_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output</span>
<span class="w">  </span><span class="nt">on</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">master</span>
</code></pre></div>
<p>Falls Fehler beim Erstellen auftreten, schickt Travis eine Email und bricht die
Veröffentlichung ab. Wenn keine Fehler auftreten, wird wenige Sekunden später
die neue Version von GitHub ausgeliefert.</p>
<h3><span class="caps">SSL</span> verschlüsselt von Cloudflare®</h3>
<p>Die <code>github.io</code> Domains werden zwar verschlüsselt ausgeliefert, aber natürlich
kann GitHub keine <span class="caps">SSL</span> Zertifikate für die eigene Domain ausstellen lassen.
[Update: Mittlerweile kann GitHub das.]
Man kann auch kein eigenes Zertifikat hochladen. Aber die Situation ist nicht
so aussichtslos wie sie scheint. Cloudflare ermöglicht es, allerdings müssen
ein paar Bedingungen erfüllt sein.</p>
<p>Cloudflare muss</p>
<ul>
<li>als <span class="caps">DNS</span> Service für die gewünschte Domain genutzt werden und</li>
<li>als Proxy vor der Seite benutzt werden.</li>
</ul>
<p>Als Bonus können wir Cloudflares <a href="https://de.wikipedia.org/wiki/Content_Delivery_Network"><span class="caps">CDN</span></a> nutzen.</p>
<p>Sobald sich Cloudflare um das <span class="caps">DNS</span> der Domain kümmert, kann über das Dashboard
<span class="caps">SSL</span> aktiviert werden — und wenn man schon dabei ist, sollte man auch die
<code>Always use HTTPS</code> und <code>HSTS</code> Optionen aktivieren.</p>
</div>
</article>
<div class="post-navigation">
<nav class="pagination">
<br/>
</nav>
</div>
</div>
<div id="last-update">
<time datetime="2024-12-27 10:29:03">10:29:03 27.12.2024</time>
</div>
</div>
<script async="" src="/theme/fx/rythm.js"></script>
<script async="" src="/theme/fx/totally_serious_script.js"></script>
<script async="" src="/theme/js/unregister_service_worker.js"></script>
</body>
</html>