<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>möchte­gern­geek - Snip category</title>
<meta content="Things I consider pretty, practical or interesting." name="description"/>
<meta content="Hendrik Schawe" name="author"/>
<meta content="Hendrik Schawe" name="copyright"/>
<meta content="#3d4f5d" name="theme-color"/>
<link href="/manifest.json" rel="manifest"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Add to home screen for Safari on iOS-->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="möchtegerngeek" name="apple-mobile-web-app-title"/>
<link href="/extra/icons/icon-152x152.png" rel="apple-touch-icon"/>
<!-- Add to home screen for Windows-->
<meta content="/extra/icons/icon-152x152.png" name="msapplication-TileImage"/>
<meta content="#b0cadb" name="msapplication-TileColor"/>
<meta content="möchte­gern­geek" property="og:site_name"/>
<meta content="Hendrik Schawe" property="og:article:author"/>
<meta content="article" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="https://blog.schawe.me/img/logo.png" property="og:image"/>
<meta content="https://blog.schawe.me/img/logo.png" name="twitter:image"/>
<link href="https://blog.schawe.me/category/snip.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/category/snip.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/category/snip.html" hreflang="x-default" rel="alternate">
<link href="/theme/css/pure-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/grids-responsive-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/blog.css" rel="stylesheet" type="text/css"/>
<script async="" src="/theme/js/mathjax-config.js"></script>
<script async="" crossorigin="anonymous" data-search-pseudo-elements="" integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<!-- Preload the other fonts early -->
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptRegular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Bold.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptItalic.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-bold.woff2" rel="prefetch" type="font/woff2"/>
<link href="https://blog.schawe.me/feeds/all.atom.xml" rel="alternate" title="möchte­gern­geek - Full Atom Feed" type="application/atom+xml">
</link></link></link></link></head>
<body>
<div class="pure-g" id="layout">
<div class="sidebar pure-u-1 pure-u-lg-1-4">
<div class="header">
<h1 class="brand-title"><a href="https://blog.schawe.me/en">möchte­gern­geek</a></h1>
<nav class="nav">
<ul class="nav-list container">
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/"><i class="fa fa-globe"></i> de</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/categories.html">Categories</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/tags.html">Tags</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/archives.html">Archive</a>
</li>
</ul>
</nav>
<div class="container">
<a class="sidebar-social-links" href="https://hendrik.schawe.me" rel="noopener" target="_blank" title="Ich">
<i class="fas fa-user sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://github.com/surt91" rel="noopener" target="_blank" title="GitHub">
<i class="fab fa-github sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="mailto:hendrik.schawe+blog@gmail.com" rel="noopener" target="_blank" title="Email">
<i class="fas fa-envelope sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://twitter.com/surt91" rel="noopener" target="_blank" title="Twitter">
<i class="fab fa-twitter sidebar-social-links"></i>
</a>
</div>
<div class="container">
<form action="https://blog.schawe.me/en/search.html" class="pure-form">
<fieldset>
<input aria-label="Search" class="search-query" id="tipue_search_input" name="q" placeholder="Search" type="text"/>
</fieldset>
</form>
</div>
</div>
</div>
<div class="content pure-u-1 pure-u-lg-3-4">
<div class="posts">
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/git-subtree.html"> git subtree  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2022-07-24T17:31:00+02:00">07/24/2022</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../git-subtree.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/en/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>Who does not know this common situation: We have a new Idea to extend our existing Project <code>old</code>. So we create a subdirectory <code>newIdea</code> in the corresponding repository. It turns out that the idea was so good that it would also be useful outside of the project <code>old</code>. It would be sensible to create a new repository <code>new</code> which should only contain the subdirectory <code>newIdea</code>. In fact, this problem seems to be so common that there is a special git subcommand since 2012 for this purpose (and more complicated cases): <code>git subtree</code></p>
<h2>New repository from subdirectory</h2>
<div class="highlight"><pre><span></span><code>old/
├─ newIdea/
│  ├─ lib.rs
├─ main.rs
</code></pre></div>
<p>So inside the directory <code>old</code> we execute the following command:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>subtree<span class="w"> </span>split<span class="w"> </span>--prefix<span class="o">=</span>newIdea/<span class="w"> </span>--branch<span class="o">=</span>onlyNewIdeaBranch
</code></pre></div>
<p>This creates a new Branch <code>onlyNewIdeaBranch</code> which only contains the contents of <code>newIdea</code>, i.e., a new root directory. So this branch has a newly written history consisting only of commits with influence on files below of <code>newIdea/</code>.</p>
<p>Now we can create the new repository <code>new</code> and pull the newly created branch.Branch pullen.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="p">;</span><span class="w"> </span>mkdir<span class="w"> </span>new<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>new
git<span class="w"> </span>init
git<span class="w"> </span>pull<span class="w"> </span>../alt<span class="w"> </span>onlyNewIdeaBranch
</code></pre></div>
<p>Maybe we want to delete the <code>newIdea</code> subdirectory from the <code>old</code> repository. Probably we have to change infrastructure code in the <code>new</code> repository.</p>
<div class="highlight"><pre><span></span><code>old/
├─ main.rs
new/
├─ lib.rs
</code></pre></div>
<h2>Move a subdirectory into an existing repository</h2>
<p>Possibly we notice that the code would fit better into an existing repository instead of a new one? Perhaps because we are in the process of moving our code into a monorepo? No problem at all!</p>
<div class="highlight"><pre><span></span><code>old/
├─ newIdea/
│  ├─ lib.rs
├─ main.rs
monorepo/
├─ project1/
├─ project2/
</code></pre></div>
<p>We already created the <code>onlyNewIdeaBranch</code>, which we want to move into the subdirectory <code>goodIdea</code> of the <code>monorepo</code>. Again, we can solve it with <code>git subtree</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>monorepo
git<span class="w"> </span>branch<span class="w"> </span>withGoodIdeadBranch
git<span class="w"> </span>checkout<span class="w"> </span>withGoodIdeadBranch
git<span class="w"> </span>subtree<span class="w"> </span>add<span class="w"> </span>--prefix<span class="o">=</span>goodIdea/<span class="w"> </span>../old<span class="w"> </span>onlyNewIdeaBranch
</code></pre></div>
<p>As soon as we ensured that our new Branch <code>withGoodIdeadBranch</code> looks good and we modified the infrastructure code, we can merge it into main.</p>
<div class="highlight"><pre><span></span><code>old/
├─ neueIdee/
│  ├─ lib.rs
├─ main.rs
monorepo/
├─ project1/
├─ project2/
├─ goodIdea/
│  ├─ lib.rs
</code></pre></div>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/raspberry-router.html"> Raspberry Router  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2021-05-10T20:19:00+02:00">05/10/2021</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../raspberry-router.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/en/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>You need to connect something with an ethernet cable to the
internet, but there is only Wifi and all you have is a Raspberry <span class="caps">PI</span>?</p>
<p>No problem, all you need to do is connecting it to the Wifi, plug the
ethernet cable in and tell it to forward all traffic from the one interface
to the other, as described in the <a href="https://wiki.archlinux.org/index.php/Internet_sharing">Arch Linux Wiki</a>.</p>
<div class="highlight"><pre><span></span><code>sysctl<span class="w"> </span>net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span>
iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>POSTROUTING<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>MASQUERADE
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>wlan0<span class="w"> </span>-o<span class="w"> </span>eth0<span class="w"> </span>-m<span class="w"> </span>state<span class="w"> </span>--state<span class="w"> </span>RELATED,ESTABLISHED<span class="w"> </span>-j<span class="w"> </span>ACCEPT
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>ACCEPT
</code></pre></div>
<p>Since our Raspberry is now a router, it should also assign <span class="caps">IP</span> addresses to the
devices connected to it via <span class="caps">DHCP</span>, for example with <a href="https://wiki.archlinux.org/title/Dnsmasq">dnsmasq</a>
and the following configuration in <code>/etc/dnsmasq.conf</code>:</p>
<div class="highlight"><pre><span></span><code>#disable dns
port=0

dhcp-range=192.168.13.50,192.168.13.150,12h
bind-interfaces
dhcp-option=3,0.0.0.0
dhcp-option=6,1.1.1.1,8.8.8.8
</code></pre></div>
<p>This is also a good opportunity to route all traffic through a <span class="caps">VPN</span>,
by replacing the <code>wlan0</code> interface above by the configured <span class="caps">VPN</span> interface (e.g. <code>tun0</code> for OpenVPN or <code>wg0</code> for WireGuard).</p>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/compress-pdf.html"> compress-pdf  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2020-04-12T10:26:00+02:00">04/12/2020</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../compress-pdf.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/en/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>To compress of a <code>pdf</code> with many high resolution images
to a sensible filesize (by downscaling and reencoding the images),
one can use ghostscript:</p>
<div class="highlight"><pre><span></span><code>gs<span class="w"> </span>-sDEVICE<span class="o">=</span>pdfwrite<span class="w"> </span>-dCompatibilityLevel<span class="o">=</span><span class="m">1</span>.4<span class="w"> </span>-dPDFSETTINGS<span class="o">=</span>/ebook<span class="w"> </span>-dEmbedAllFonts<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-dSubsetFonts<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-dNOPAUSE<span class="w"> </span>-dQUIET<span class="w"> </span>-dBATCH<span class="w"> </span>-sOutputFile<span class="o">=</span>output.pdf<span class="w"> </span>input.pdf
</code></pre></div>
<p>The available presets are <code>screen</code>, <code>ebook</code>, <code>printer</code>, <code>prepress</code> and <code>default</code>.
More options can be listed with:</p>
<div class="highlight"><pre><span></span><code>gs<span class="w"> </span>-sDEVICE<span class="o">=</span>pdfwrite<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span>-c<span class="w"> </span><span class="s2">"currentpagedevice { exch ==only ( ) print == } forall"</span>
</code></pre></div>
</div>
</article>
</div>
<div class="post-navigation">
<nav class="pagination">
<a href="https://blog.schawe.me/en/category/snip2.html">Older →</a>
<br/>
            1 / 5
        </nav>
</div>
</div>
<div id="last-update">
<time datetime="2025-10-29 22:34:37">22:34:37 29.10.2025</time>
</div>
</div>
<script async="" src="/theme/fx/rythm.js"></script>
<script async="" src="/theme/fx/totally_serious_script.js"></script>
<script async="" src="/theme/js/unregister_service_worker.js"></script>
</body>
</html>