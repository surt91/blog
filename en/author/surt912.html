<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>möchte­gern­geek - Articles by surt91</title>
<meta content="Things I consider pretty, practical or interesting." name="description"/>
<meta content="Hendrik Schawe" name="author"/>
<meta content="Hendrik Schawe" name="copyright"/>
<meta content="#3d4f5d" name="theme-color"/>
<link href="/manifest.json" rel="manifest"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Add to home screen for Safari on iOS-->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="default" name="apple-mobile-web-app-status-bar-style"/>
<meta content="möchtegerngeek" name="apple-mobile-web-app-title"/>
<link href="/extra/icons/icon-152x152.png" rel="apple-touch-icon"/>
<!-- Add to home screen for Windows-->
<meta content="/extra/icons/icon-152x152.png" name="msapplication-TileImage"/>
<meta content="#b0cadb" name="msapplication-TileColor"/>
<meta content="möchte­gern­geek" property="og:site_name"/>
<meta content="Hendrik Schawe" property="og:article:author"/>
<meta content="article" property="og:type"/>
<meta content="summary" name="twitter:card"/>
<meta content="https://blog.schawe.me/img/logo.png" property="og:image"/>
<meta content="https://blog.schawe.me/img/logo.png" name="twitter:image"/>
<link href="https://blog.schawe.me/author/surt912.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/author/surt912.html" hreflang="de" rel="alternate">
<link href="https://blog.schawe.me/author/surt912.html" hreflang="x-default" rel="alternate">
<link href="/theme/css/pure-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/grids-responsive-min.css" rel="stylesheet" type="text/css"/>
<link href="/theme/css/blog.css" rel="stylesheet" type="text/css"/>
<script async="" src="/theme/js/mathjax-config.js"></script>
<script async="" crossorigin="anonymous" data-search-pseudo-elements="" integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<!-- Preload the other fonts early -->
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptRegular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/FiraSans-Bold.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/Merriweather-12ptItalic.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-regular.woff2" rel="prefetch" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="/theme/woff2/firacode-bold.woff2" rel="prefetch" type="font/woff2"/>
<link href="https://blog.schawe.me/feeds/all.atom.xml" rel="alternate" title="möchte­gern­geek - Full Atom Feed" type="application/atom+xml">
</link></link></link></link></head>
<body>
<div class="pure-g" id="layout">
<div class="sidebar pure-u-1 pure-u-lg-1-4">
<div class="header">
<h1 class="brand-title"><a href="https://blog.schawe.me/en">möchte­gern­geek</a></h1>
<nav class="nav">
<ul class="nav-list container">
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/"><i class="fa fa-globe"></i> de</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/categories.html">Categories</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/tags.html">Tags</a>
</li>
<li class="nav-item">
<a class="pure-button" href="https://blog.schawe.me/en/archives.html">Archive</a>
</li>
</ul>
</nav>
<div class="container">
<a class="sidebar-social-links" href="https://hendrik.schawe.me" rel="noopener" target="_blank" title="Ich">
<i class="fas fa-user sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://github.com/surt91" rel="noopener" target="_blank" title="GitHub">
<i class="fab fa-github sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="mailto:hendrik.schawe+blog@gmail.com" rel="noopener" target="_blank" title="Email">
<i class="fas fa-envelope sidebar-social-links"></i>
</a>
<a class="sidebar-social-links" href="https://twitter.com/surt91" rel="noopener" target="_blank" title="Twitter">
<i class="fab fa-twitter sidebar-social-links"></i>
</a>
</div>
<div class="container">
<form action="https://blog.schawe.me/en/search.html" class="pure-form">
<fieldset>
<input aria-label="Search" class="search-query" id="tipue_search_input" name="q" placeholder="Search" type="text"/>
</fieldset>
</form>
</div>
</div>
</div>
<div class="content pure-u-1 pure-u-lg-3-4">
<div class="posts">
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/raspberry-router.html"> Raspberry Router  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2021-05-10T20:19:00+02:00">05/10/2021</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../raspberry-router.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-snip">
<a href="https://blog.schawe.me/en/categories.html#snip-ref">Snip</a>
</span>
</div>
</header>
<div class="post-content">
<p>You need to connect something with an ethernet cable to the
internet, but there is only Wifi and all you have is a Raspberry <span class="caps">PI</span>?</p>
<p>No problem, all you need to do is connecting it to the Wifi, plug the
ethernet cable in and tell it to forward all traffic from the one interface
to the other, as described in the <a href="https://wiki.archlinux.org/index.php/Internet_sharing">Arch Linux Wiki</a>.</p>
<div class="highlight"><pre><span></span><code>sysctl<span class="w"> </span>net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span>
iptables<span class="w"> </span>-t<span class="w"> </span>nat<span class="w"> </span>-A<span class="w"> </span>POSTROUTING<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>MASQUERADE
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>wlan0<span class="w"> </span>-o<span class="w"> </span>eth0<span class="w"> </span>-m<span class="w"> </span>state<span class="w"> </span>--state<span class="w"> </span>RELATED,ESTABLISHED<span class="w"> </span>-j<span class="w"> </span>ACCEPT
iptables<span class="w"> </span>-A<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span>eth0<span class="w"> </span>-o<span class="w"> </span>wlan0<span class="w"> </span>-j<span class="w"> </span>ACCEPT
</code></pre></div>
<p>Since our Raspberry is now a router, it should also assign <span class="caps">IP</span> addresses to the
devices connected to it via <span class="caps">DHCP</span>, for example with <a href="https://wiki.archlinux.org/title/Dnsmasq">dnsmasq</a>
and the following configuration in <code>/etc/dnsmasq.conf</code>:</p>
<div class="highlight"><pre><span></span><code>#disable dns
port=0

dhcp-range=192.168.13.50,192.168.13.150,12h
bind-interfaces
dhcp-option=3,0.0.0.0
dhcp-option=6,1.1.1.1,8.8.8.8
</code></pre></div>
<p>This is also a good opportunity to route all traffic through a <span class="caps">VPN</span>,
by replacing the <code>wlan0</code> interface above by the configured <span class="caps">VPN</span> interface (e.g. <code>tun0</code> for OpenVPN or <code>wg0</code> for WireGuard).</p>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/inline-python.html"> inline-python  </a>
</h2>
<div class="post-meta">
<time class="post-time" datetime="2021-05-05T20:31:00+02:00">05/05/2021</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../inline-python.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-code">
<a href="https://blog.schawe.me/en/categories.html#code-ref">Code</a>
</span>
<span class="tags-in-article">
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#python-ref">Python</a>
</span>
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#rust-ref">Rust</a>
</span>
</span>
</div>
</header>
<div class="post-content">
<p>Use the right tool for the job. In my everyday life, this means writing simulations
in Rust and visualize the results in Python. Thanks to <a href="https://crates.io/crates/inline-python"><code>inline-python</code></a>
this process works extremely well.</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">inline_python</span><span class="p">::</span><span class="n">python</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">628</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">i</span><span class="o">|</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">100.</span><span class="p">).</span><span class="n">collect</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">sin</span><span class="p">()).</span><span class="n">collect</span><span class="p">();</span>

<span class="w">    </span><span class="n">python</span><span class="o">!</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">import</span><span class="w"> </span><span class="n">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">np</span>
<span class="w">        </span><span class="n">from</span><span class="w"> </span><span class="n">matplotlib</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="n">pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">plt</span>

<span class="w">        </span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="o">'</span><span class="na">x</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">y</span><span class="p">)</span>
<span class="w">        </span><span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This minimal example is useless of course. But I already used this
crate productively to simulate dynamics on a <a href="https://docs.rs/petgraph/">petgraph</a>
graph and visualize its state via <a href="https://graph-tool.skewed.de/">graph-tool</a>.</p>
<p><img alt="Graph state visualized with graph-tool" class="invertable" height="1920" src="/img/inlinepy_graph.png" width="1920"/></p>
</div>
</article>
<article class="post">
<header>
<h2 class="post-title">
<a href="https://blog.schawe.me/en/paper-lis2.html"> Number of longest increasing subsequences  </a>
</h2>
<div class="post-meta">
<div>
<span class="doi-details">
                        Phil Krabbe, Hendrik Schawe, Alexander K. Hartmann,
                        Physical Review E <b>101</b>, 062109 (2020)
                    </span>
</div>
<time class="post-time" datetime="2020-06-02T11:11:00+02:00">06/02/2020</time>
<span class="languages-in-article">
<span class="language">
<a href="https://blog.schawe.me/en/../paper-lis2.html"><i class="fa fa-globe"></i> de</a>
</span>
</span>
<span class="category category-phys">
<a href="https://blog.schawe.me/en/categories.html#phys-ref">Phys</a>
</span>
<span class="tags-in-article">
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#image-ref">Image</a>
</span>
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#physics-ref">Physics</a>
</span>
<span class="tag">
<a href="https://blog.schawe.me/en/tags.html#publication-ref">Publication</a>
</span>
</span>
<span class="doi"><a href="https://dx.doi.org/10.1103/PhysRevE.101.062109">doi:10.1103/PhysRevE.101.062109</a></span>
</div>
</header>
<div class="post-content">
<p>My favorite problems are those which seem simple but exhibit unexpected depth. A prime
example is the <a href="https://blog.schawe.me/en/paper-tsp-pt.html">Traveling Salesperson Problem</a>: It is simple to understand
that the garbage truck needs to collect every garbage container, while trying to take the shortest route.</p>
<p>But here, I want to talk about the problem of the <em>longest increasing subsequence</em> (<span class="caps">LIS</span>): For a
given sequence of numbers, find the subsequence consisting of increasing numbers, which is longest.</p>
<p><img alt="A longest increasing subsequence is marked in a sequence" class="invertable" height="68" src="/img/lis_example.png" width="666"/></p>
<p>This problem is so simple that it was first studied almost as a placeholder by Stanisław Ulam in a
book chapter describing the Monte Carlo method. And judging by the google results, it seems to
be a common problem posed to university students. I am wondering how many job applicants were distressed
when trying to solve it in front of a whiteboard.</p>
<p><img alt="The Surprising Mathematics of Longest Increasing Subsequences -- Dan Romik" height="800" src="/img/romik.jpg" width="1200"/></p>
<p>However, apparently one can write whole books about this problem. It turns out that there are
surprising connections to seemingly independent problems. For example, the length $L$ of a <span class="caps">LIS</span>
of a permutation fluctuates the same way as the
<a href="https://en.wikipedia.org/wiki/Kardar%E2%80%93Parisi%E2%80%93Zhang_equation">distance from the center to the border of a coffee stain</a>
or the <a href="https://www.quantamagazine.org/beyond-the-bell-curve-a-new-universal-law-20141015/">largest eigenvalues of random matrices</a>.</p>
<p>The solution of this problem is not unique: A Sequence can contain multiple longest increasing
subsequences. Indeed, their number grows exponentially with the length of the original sequence.</p>
<p>![Different longest increasing subsequences within the same sequence](/img/lis_alternatives.png]{: .invertable}</p>
<p>But up to now, there did not exist any results about the precise number of different <span class="caps">LIS</span>.
A common sentiment is that counting all <span class="caps">LIS</span> was infeasible, since there are exponentially many.
And that would be true if we would want to enumerate them. But since we only want to now
the number, we can use dynamic programming to determine it efficiently. The basic idea
is that we calculate for each element that can appear at position $x$ in a <span class="caps">LIS</span> of how many
increasing subsequences of length $L-x$ it is the first element.</p>
<p>This becomes easy thanks to a datastructure encoding which elements can be subsequent in a <span class="caps">LIS</span>.
For this we extend <a href="https://en.wikipedia.org/wiki/Patience_sorting">Patience Sort</a>. Since the algorithm
is called after a game of cards, it is adequate to describe it with cards: We write each element of
our sequence on a card and sort the deck according to the sequence such that the first element is on
top. Then we take cards from the top of the deck. We put the topmost card on the table opening a stack.
We put the next card on the first stack whose top card is larger than it or open a new stack right of
the currently rightmost stack. Each time we put a card on the table, we also add pointers to all cards
of the stack left of the placed card which are smaller. These are the cards which could be its predecessor
in a <span class="caps">LIS</span>.</p>
<p><img alt="Animation of Patience Sort" height="263" src="/img/patience.gif" width="208"/></p>
<p>In the end there are $L$ stacks, where $L$ is the length of the <span class="caps">LIS</span>. We can start from the rightmost
stack, select an arbitrary element and follow the pointers to build a <span class="caps">LIS</span>. If we were only
<a href="https://doi.org/10.1103/PhysRevE.101.062109">interested in the length</a>, we could disregard all but the top card of every
stack and could simply the algorithm:</p>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">lis_len</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span><span class="w"> </span><span class="nb">Ord</span><span class="o">&gt;</span><span class="p">(</span><span class="n">seq</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="n">T</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stacks</span><span class="p">.</span><span class="n">binary_search</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="n">err</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">"Encountered non-unique element in sequence!"</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">stacks</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">stacks</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">stacks</span><span class="p">.</span><span class="n">len</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>But we want more, therefore we annotate each card of the rightmost stack with the number of increasing
subsequences of length $x=1$ of which they are the first element, which is trivially 1 for each card.
Then we continue with the stack left of it and annotate how many increasing subsequences of length 2
start with them. We can calculate this easily by following the pointers backwards and add up the
annotations of all predecessor cards. After repeating this and annotating the leftmost stack, we
can sum all annotations of the leftmost stack to get the total number of distinct <span class="caps">LIS</span>: here $7$.</p>
<p><img alt="Example of the datastructure to count LIS" class="invertable" height="488" src="/img/lis_backpointer.png" width="600"/></p>
<p>About the behavior for longer sequences from different random ensembles we published an
<a href="https://hendrik.schawe.me/pdf/2020_liscount_PRE.pdf">article</a>.</p>
</div>
</article>
</div>
<div class="post-navigation">
<nav class="pagination">
<a href="https://blog.schawe.me/en/author/surt91.html">← Newer</a>
<span class="separatordot">·</span>
<a href="https://blog.schawe.me/en/author/surt913.html">Older →</a>
<br/>
            2 / 4
        </nav>
</div>
</div>
<div id="last-update">
<time datetime="2025-10-29 22:34:37">22:34:37 29.10.2025</time>
</div>
</div>
<script async="" src="/theme/fx/rythm.js"></script>
<script async="" src="/theme/fx/totally_serious_script.js"></script>
<script async="" src="/theme/js/unregister_service_worker.js"></script>
</body>
</html>